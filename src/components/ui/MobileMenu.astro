---
// src/components/ui/MobileMenu.astro
import { SITE_TITLE, SITE_TAGLINE } from '../../consts.js';
import { navigation } from '../../data/navigation.js';
---

<div id="mobile-menu-overlay" class="fixed inset-0 z-50 bg-black bg-opacity-50 hidden">
  <div id="mobile-menu-panel" class="fixed inset-y-0 right-0 z-50 w-80 bg-white shadow-lg transform translate-x-0">
    <div class="flex justify-between items-center p-4 border-b">
      <div>
        <span class="font-bold text-xl text-slate-900 block">{SITE_TITLE}</span>
        <span class="text-sm text-slate-600 block">{SITE_TAGLINE}</span>
      </div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const overlay = document.getElementById('mobile-menu-overlay');
    const openBtn = document.getElementById('open-mobile-menu');
    const closeBtn = document.getElementById('close-mobile-menu');

    function openMenu() {
      overlay?.classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
    function closeMenu() {
      overlay?.classList.add('hidden');
      document.body.style.overflow = '';
    }

    openBtn?.addEventListener('click', openMenu);
    closeBtn?.addEventListener('click', closeMenu);
    overlay?.addEventListener('click', (e) => {
      if (e.target === overlay) closeMenu();
    });
  });
</script>
      <button class="text-slate-700 hover:text-amber-600" id="close-mobile-menu">
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    
    <nav class="p-4 overflow-y-auto h-full">
      <ul class="space-y-2">
        {navigation.map(item => (
          <li>
            {!item.children ? (
              <a 
                href={item.href} 
                class="flex items-center p-3 text-slate-700 hover:bg-slate-50 rounded-md"
              >
                <i class={`fas ${item.icon} mr-3`}></i>
                {item.name}
              </a>
            ) : (
              <div class="relative">
                <button class="flex items-center w-full p-3 text-slate-700 hover:bg-slate-50 rounded-md">
                  <i class={`fas ${item.icon} mr-3`}></i>
                  {item.name}
                  <svg class="ml-auto h-5 w-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </button>
                <ul class="pl-6 mt-1 space-y-1">
                  {item.children.map(child => (
                    <li>
                      <a href={child.href} class="flex items-center p-3 text-slate-700 hover:bg-slate-50 rounded-md">
                        <i class={`fas ${child.icon} mr-3 text-amber-600`}></i>
                        {child.name}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            )}
          </li>
        ))}
      </ul>
    </nav>
  </div>
</div>
